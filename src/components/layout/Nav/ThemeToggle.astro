---
import Moon from "@assets/icons/Moon.astro";
import Sun from "@assets/icons/Sun.astro";
---

<button
  aria-label="change theme"
  class="toggleTheme border-secondary hover:bg-secondary hover:text-primary relative flex cursor-pointer items-center justify-center rounded-full border p-2 transition-colors duration-300"
>
  <Sun
    styles="h-5 w-5 rotate-0 scale-100 transition-transform dark:-rotate-90 dark:scale-0 duration-300"
  />
  <Moon
    styles="absolute h-5 w-5 rotate-90 scale-0 transition-transform dark:rotate-0 dark:scale-100 duration-300"
  />
</button>

<script is:inline data-astro-rerun>
  document.querySelectorAll(".toggleTheme").forEach((btn) => {
    if (!btn.dataset.listenerAdded) {
      btn.addEventListener("click", () => {
        const html = document.documentElement;
        const isDark = html.classList.toggle("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
      });
      btn.dataset.listenerAdded = "true";
    }
  });
</script>
